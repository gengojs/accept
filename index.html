<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js">
    </script>
    <script src="scripts/prettify/lang-css.js">
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

    <div id="main">

        <h1 id="gengojs-accept">gengojs-accept</h1>
        <p>
            <a href="https://travis-ci.org/iwatakeshi/gengojs-accept"><img src="https://travis-ci.org/iwatakeshi/gengojs-accept.svg?branch=master" alt="Build Status"></a>
            <a href="https://github.com/iwatakeshi/gengojs-accept/blob/master/package.json"><img src="https://david-dm.org/iwatakeshi/gengojs-accept.png" alt="Dependency Status"></a>
            <a href="https://github.com/iwatakeshi/gengojs-accept/blob/master/LICENSE"><img src="http://img.shields.io/npm/l/gengojs-accept.svg" alt="License Status"></a>
            <a href=""><img src="http://img.shields.io/npm/dm/gengojs-accept.svg" alt="Downloads"></a>
            <a href=""><img src="http://img.shields.io/npm/v/gengojs-accept.svg" alt="Version"></a>
        </p>
        <p>
            <a href="https://nodei.co/npm/gengojs-accept/"><img src="https://nodei.co/npm/gengojs-accept.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM"></a>
        </p>
        <p>Express, Koa, Hapi locale parser that powers (or will power) <a href="https://github.com/iwatakeshi/gengojs">gengo.js</a>.</p>
        <p>This module parses the accept-language header from either Express, Koa, or Hapi and returns the appropriate locale.</p>
        <h2 id="usage">Usage</h2>
        <pre><code class="lang-bash">npm install --save gengojs-accept
</code></pre>
        <p><strong>As standalone:</strong></p>
        <pre><code class="lang-js"><span class="hljs-keyword">var</span> accept = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gengojs-accept'</span>)
<span class="hljs-comment">//In express</span>
app.use(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res, next)</span></span>{
    <span class="hljs-comment">//doens't have to be app.use.</span>
    <span class="hljs-comment">//Just wherever 'req' or 'request'</span>
    <span class="hljs-comment">//is avaible</span>
    <span class="hljs-keyword">var</span> result = accept(req);
    res.send({locale:result.getLocale(), detected:result.detectLocale()})
})

<span class="hljs-comment">//In koa</span>
app.use(<span class="hljs-function"><span class="hljs-keyword">function</span>*<span class="hljs-params">(next)</span> </span>{
    <span class="hljs-keyword">var</span> result = accept(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">var</span> body = {
        locale: result.getLocale(), 
        detected:result.detectLocale()
    };
    <span class="hljs-keyword">this</span>.body = body;
    <span class="hljs-keyword">yield</span> next;
});

<span class="hljs-comment">//In hapi</span>
server.route({
    method:<span class="hljs-string">'GET'</span>,
    path:<span class="hljs-string">'/'</span>,
    handler:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(request, reply)</span></span>{
        <span class="hljs-keyword">var</span> result = accept(request);
        reply({locale:result.getLocale(), detected:result.detectLocale()})
    }
})
</code></pre>
        <p><strong>As middleware:</strong></p>
        <pre><code class="lang-js"><span class="hljs-comment">//koa example</span>
<span class="hljs-keyword">var</span> koa = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa'</span>);
<span class="hljs-keyword">var</span> app = koa();
<span class="hljs-comment">//note the path to koa middleware!</span>
<span class="hljs-keyword">var</span> accept = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gengojs-accept/koa'</span>);

app.use(accept());

app.use(<span class="hljs-function"><span class="hljs-keyword">function</span>*<span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> req = <span class="hljs-keyword">this</span>.request;
    <span class="hljs-keyword">this</span>.body = req.accept.getFromHeader();
});

app.listen(<span class="hljs-number">3000</span>);
</code></pre>
        <pre><code class="lang-js"><span class="hljs-comment">//express example</span>
<span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> app = express();
<span class="hljs-comment">//note the path to express middleware!</span>
<span class="hljs-keyword">var</span> accept = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gengojs-accept/express'</span>);

app.use(accept());

app.get(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res)</span> </span>{
    res.send(req.accept.getFromHeader());
});

app.listen(<span class="hljs-number">3000</span>);
</code></pre>
        <pre><code class="lang-js"><span class="hljs-comment">//hapi example</span>
<span class="hljs-keyword">var</span> server = <span class="hljs-keyword">new</span> Hapi.Server();
<span class="hljs-comment">//note the path to express middleware!</span>
<span class="hljs-keyword">var</span> accept = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gengojs-accept/hapi'</span>);

server.connection({
    host: <span class="hljs-string">'localhost'</span>,
    port: <span class="hljs-number">3000</span>
});

server.register(accept(), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'an error occurred'</span>);
});

server.route({
    method: <span class="hljs-string">'GET'</span>,
    path: <span class="hljs-string">'/'</span>,
    handler: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(request, reply)</span> </span>{
        <span class="hljs-keyword">return</span> reply(request.accept.getLocale());
    }
});
server.start(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

});
</code></pre>
        <p><strong>Note:</strong></p>
        <p>gengojs-accept will attach to both request and response object for both Express, Koa. For Hapi, it is only attached to request.</p>
        <h2 id="options">Options</h2>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Default</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>check<code/></td>
                    <td>Compare against the supported locales</td>
                    <td><code>true<code/></td>
                </tr>
                <tr>
                    <td><code>default<code/></td>
                    <td>The default locale</td>
                    <td><code>&quot;en-US&quot;<code/></td>
                </tr>
                <tr>
                    <td><code>supported<code/></td>
                    <td>The supported locales</td>
                    <td><code>[&quot;en-US&quot;]<code/></td>
                </tr>
                <tr>
                    <td><code>keys<code/></td>
                    <td>The keys to use for query and cookie</td>
                    <td><code>{query:&#39;locale&#39;, cookie:&#39;locale&#39;}<code/></td>
                </tr>
                <tr>
                    <td><code>detect<code/></td>
                    <td>The method of parsing allowed to get locale.</td>
                    <td><code>{header: true, cookie: false, query: false, url: false, domain:false, subdomain: false}<code/></td>
                </tr>
            </tbody>
        </table>
        <pre><code class="lang-js">accept(req, opt);
<span class="hljs-comment">//example</span>
accept(req, {
    <span class="hljs-keyword">default</span>:<span class="hljs-string">'ja'</span>,
    detect:{
        header:<span class="hljs-literal">false</span>,
        cookie:<span class="hljs-literal">true</span>
    }
})
</code></pre>
        <h2 id="changelog">Changelog</h2>
        <p>For changelog, visit the <a href="https://github.com/iwatakeshi/gengojs-accept/blob/master/CHANGELOG.md">GitHub</a> page.</p>

</body>

</html>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
    <h3>Classes</h3>
    <ul>
        <li><a href="Accept.html">Accept</a></li>
    </ul>
    <h3>Global</h3>
    <ul>
        <li><a href="global.html#accept">accept</a></li>
        <li><a href="global.html#detectLocale">detectLocale</a></li>
        <li><a href="global.html#getAcceptLanguage">getAcceptLanguage</a></li>
        <li><a href="global.html#getFromCookie">getFromCookie</a></li>
        <li><a href="global.html#getFromDomain">getFromDomain</a></li>
        <li><a href="global.html#getFromHeader">getFromHeader</a></li>
        <li><a href="global.html#getFromQuery">getFromQuery</a></li>
        <li><a href="global.html#getFromSubdomain">getFromSubdomain</a></li>
        <li><a href="global.html#getFromUrl">getFromUrl</a></li>
        <li><a href="global.html#getLocale">getLocale</a></li>
        <li><a href="global.html#setLocale">setLocale</a></li>
    </ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta2</a> on Wed Mar 18 2015 11:23:41 GMT-0600 (Mountain Daylight Time)
</footer>

<script>
    prettyPrint();
</script>
<script src="scripts/linenumber.js">
</script>
</body>

</html>